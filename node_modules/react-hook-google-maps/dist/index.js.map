{"version":3,"file":"index.js","sources":["../src/useGoogleMapsApi.ts","../src/useGoogleMaps.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst initialized: HTMLScriptElement[] = [];\nexport function useGoogleMapsApi(apiKey: string) {\n  const [googleApi, setGoogleApi] = useState();\n\n  useEffect(() => {\n    if ((window as any).google) {\n      // if window.google object is already available just use it\n      setGoogleApi((window as any).google);\n      return;\n    }\n    const src = \"https://maps.googleapis.com/maps/api/js?key=\" + apiKey;\n\n    const existingScript = initialized.find(el => el.src === src);\n\n    const onLoad = () => {\n      setGoogleApi((window as any).google);\n    };\n    if (existingScript) {\n      // if script tag was added by other element just check when it is loaded\n      existingScript.addEventListener(\"load\", onLoad);\n      return;\n    }\n\n    const script = document.createElement(`script`);\n    script.src = src;\n    script.async = true;\n    script.defer = true;\n    script.addEventListener(`load`, onLoad);\n    (document.head as any).appendChild(script);\n    initialized.push(script);\n\n    return () => {\n      script.removeEventListener(`load`, onLoad);\n      script.remove();\n      initialized.splice(\n        initialized.findIndex(el => el.src === src),\n        1,\n      );\n    };\n  }, [apiKey]);\n\n  return googleApi;\n}\n","import { useState, useEffect, useRef } from \"react\";\nimport { useGoogleMapsApi } from \"./useGoogleMapsApi\";\n\nexport function useGoogleMaps(apiKey: string, options: google.maps.MapOptions) {\n  const google = useGoogleMapsApi(apiKey);\n  const ref = useRef<HTMLDivElement>(null);\n  const [map, setMap] = useState();\n\n  useEffect(() => {\n    if (!google || !ref) {\n      return;\n    }\n    setMap(new google.maps.Map(ref.current, options));\n  }, [google, ref]);\n\n  return { ref, map, google };\n}\n"],"names":["useEffect","useRef"],"mappings":";;;;;;AAEA,IAAM,WAAW,GAAwB,EAAE,CAAC;SAC5B,gBAAgB,CAAC,MAAc;IACvC,IAAA,qBAAsC,EAArC,iBAAS,EAAE,oBAA0B,CAAC;IAE7CA,eAAS,CAAC;QACR,IAAK,MAAc,CAAC,MAAM,EAAE;;YAE1B,YAAY,CAAE,MAAc,CAAC,MAAM,CAAC,CAAC;YACrC,OAAO;SACR;QACD,IAAM,GAAG,GAAG,8CAA8C,GAAG,MAAM,CAAC;QAEpE,IAAM,cAAc,GAAG,WAAW,CAAC,IAAI,CAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,GAAG,KAAK,GAAG,GAAA,CAAC,CAAC;QAE9D,IAAM,MAAM,GAAG;YACb,YAAY,CAAE,MAAc,CAAC,MAAM,CAAC,CAAC;SACtC,CAAC;QACF,IAAI,cAAc,EAAE;;YAElB,cAAc,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAChD,OAAO;SACR;QAED,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;QACjB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACvC,QAAQ,CAAC,IAAY,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC3C,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEzB,OAAO;YACL,MAAM,CAAC,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAC3C,MAAM,CAAC,MAAM,EAAE,CAAC;YAChB,WAAW,CAAC,MAAM,CAChB,WAAW,CAAC,SAAS,CAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,GAAG,KAAK,GAAG,GAAA,CAAC,EAC3C,CAAC,CACF,CAAC;SACH,CAAC;KACH,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,OAAO,SAAS,CAAC;AACnB;;SCzCgB,aAAa,CAAC,MAAc,EAAE,OAA+B;IAC3E,IAAM,MAAM,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;IACxC,IAAM,GAAG,GAAGC,YAAM,CAAiB,IAAI,CAAC,CAAC;IACnC,IAAA,qBAA0B,EAAzB,WAAG,EAAE,cAAoB,CAAC;IAEjCD,eAAS,CAAC;QACR,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,EAAE;YACnB,OAAO;SACR;QACD,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;KACnD,EAAE,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;IAElB,OAAO,EAAE,GAAG,KAAA,EAAE,GAAG,KAAA,EAAE,MAAM,QAAA,EAAE,CAAC;AAC9B,CAAC;;;;;"}